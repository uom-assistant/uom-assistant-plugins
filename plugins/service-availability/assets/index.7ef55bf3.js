import{o as r,c as o,a as t,d as k,t as w,b as g,u as l,F as h,r as A,n as _,e as u,f as v,g as y,h as $,i as L,j as V,k as b,l as j}from"./vendor.4eeeb206.js";function xe(){import("data:text/javascript,")}const B=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))d(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const e of a.addedNodes)e.tagName==="LINK"&&e.rel==="modulepreload"&&d(e)}).observe(document,{childList:!0,subtree:!0});function c(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerpolicy&&(a.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?a.credentials="include":s.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function d(s){if(s.ep)return;s.ep=!0;const a=c(s);fetch(s.href,a)}};B();const O={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},C=t("path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10s10-4.5 10-10S17.5 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8s8 3.59 8 8s-3.59 8-8 8m4.59-12.42L10 14.17l-2.59-2.58L6 13l4 4l8-8l-1.41-1.42z",fill:"currentColor"},null,-1),E=[C];function P(p,n){return r(),o("svg",O,E)}var R={name:"mdi-check-circle-outline",render:P};const z={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},F=t("path",{d:"M14 3v2h3.59l-9.83 9.83l1.41 1.41L19 6.41V10h2V3m-2 16H5V5h7V3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7h-2v7z",fill:"currentColor"},null,-1),Y=[F];function H(p,n){return r(),o("svg",z,Y)}var M={name:"mdi-open-in-new",render:H};const I={class:"text-lg pb-1"},q={class:"pt-1"},D={class:"flex items-center justify-between"},J=["title"],K={key:0,class:"text-sm text-gray-500 dark:text-warm-gray-400"},T={class:"flex items-center justify-between mt-1"},U={key:0,class:"text-xs text-gray-500 dark:text-warm-gray-400"},G=["href"],Q=y("Find out more "),W=k({props:{type:null,list:null},setup(p){const n=p,{list:c,type:d}=w(n);return(s,a)=>{const e=M;return r(),o("section",{class:_(["p-3 rounded-lg m-3 mt-0 border-1px dark:border-opacity-30 dark:bg-opacity-15",l(d)==="issue"?"bg-yellow-50 border-orange-200 dark:bg-yellow-200 dark:border-orange-300":"bg-red-50 border-red-200 dark:bg-red-200 dark:border-red-300"])},[t("h2",I,"Ongoing "+g(l(d)==="issue"?"issues":"errors"),1),t("ul",null,[(r(!0),o(h,null,A(l(c),(i,m)=>(r(),o(h,{key:`all-${i.id}`},[t("li",q,[t("div",D,[t("h3",{class:"text-gray-700 dark:text-warm-gray-300 mb-0.5",title:i.description},g(i.name),9,J),t("span",{class:_(["w-12px h-12px rounded-full mr-1 flex-center",l(d)==="issue"?"bg-yellow-500":"bg-red-500"])},[t("span",{class:_(["w-12px h-12px block rounded-full animate-ping animation-slow bg-opacity-40",l(d)==="issue"?"bg-yellow-500":"bg-red-500"])},null,2)],2)]),i.notes?(r(),o("p",K,g(i.notes),1)):u("",!0),t("div",T,[i.timestamp?(r(),o("span",U,"Last updated: "+g(i.timestamp),1)):u("",!0),i.url?(r(),o("a",{key:1,class:"text-xs text-primary-dark inline-flex items-center dark:text-primary-light hover:underline",target:"_blank",href:i.url},[Q,v(e,{class:"ml-0.5"})],8,G)):u("",!0)])]),m!==l(c).length-1?(r(),o("hr",{key:0,class:_(["pb-1 mt-2.5 dark:border-opacity-20",l(d)==="issue"?"border-orange-100 dark:border-orange-200":"border-red-100 dark:border-red-200"])},null,2)):u("",!0)],64))),128))])],2)}}}),X={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},Z=t("path",{d:"M11 9h2V7h-2m1 13c-4.41 0-8-3.59-8-8s3.59-8 8-8s8 3.59 8 8s-3.59 8-8 8m0-18A10 10 0 0 0 2 12a10 10 0 0 0 10 10a10 10 0 0 0 10-10A10 10 0 0 0 12 2m-1 15h2v-6h-2v6z",fill:"currentColor"},null,-1),ee=[Z];function te(p,n){return r(),o("svg",X,ee)}var se={name:"mdi-information-outline",render:te};const re={class:"p-3 bg-true-gray-100 rounded-lg m-3 mt-0 dark:bg-true-gray-700"},ne=t("h2",{class:"text-lg pb-1"},"All Services",-1),ae=["title"],oe=["href"],le={key:0,class:"pb-1 mt-2 dark:border-true-gray-600"},ie=k({props:{list:null},setup(p){const n=p,{list:c}=w(n);return(d,s)=>{const a=se;return r(),o("section",re,[ne,t("ul",null,[(r(!0),o(h,null,A(l(c),(e,i)=>(r(),o(h,{key:`all-${e.id}`},[t("li",{class:_(["pt-1 flex items-center justify-between",{"-mb-0.5":i===l(c).length-1}])},[t("h3",{class:"text-gray-700 dark:text-gray-300 flex items-center justify-between",title:e.description},[y(g(e.name),1),e.url?(r(),o("a",{key:0,target:"_blank",class:"inline-flex items-center",href:e.url},[v(a,{class:"text-sm ml-1.5 text-gray-500 dark:text-gray-400"})],8,oe)):u("",!0)],8,ae),t("span",{class:_(["w-12px h-12px rounded-full mr-1 flex-center",e.availability==="ok"?"bg-green-500":e.availability==="issues"?"bg-yellow-500":"bg-red-500"])},[t("span",{class:_(["w-12px h-12px block rounded-full animate-ping animation-slow bg-opacity-40",e.availability==="ok"?"bg-green-500":e.availability==="issues"?"bg-yellow-500":"bg-red-500"])},null,2)],2)],2),i!==l(c).length-1?(r(),o("hr",le)):u("",!0)],64))),128))])])}}}),ce={class:"h-200px flex-center text-gray-300"},de=k({props:{list:null,loading:{type:Boolean}},setup(p){const n=p,{list:c,loading:d}=w(n);return(s,a)=>(r(),o("div",ce,g(l(c).length===0&&l(d)?"Loading\u2026":"No data"),1))}});const ue=t("h1",{class:"font-display text-2xl px-3 py-5 font-bold flex items-center justify-start"},[t("span",{class:"w-15px h-15px bg-primary-dark rounded-full mr-3 ml-2 flex-center dark:bg-primary-light"},[t("span",{class:"w-15px h-15px bg-primary-dark block rounded-full animate-ping animation-slow bg-opacity-40 dark:bg-primary-light"})]),y(" Service availability ")],-1),pe={key:0,class:"px-3 py-2 bg-green-50 rounded-lg m-3 mt-0 text-green-500 border-green-200 border-1px dark:bg-green-200 dark:border-green-300 dark:border-opacity-30 dark:bg-opacity-15 flex items-center"},_e=y(" All services are in operation. "),me={class:"-mt-0.5 pb-2.5 text-sm"},ge={target:"_blank",class:"inline-flex items-center mx-3 text-primary-dark dark:text-primary-light",href:"https://www.itservices.manchester.ac.uk/help/serviceavailability/"},he=y("Source"),ye=t("span",{class:"text-gray-400 dark:text-gray-500 inline-block -ml-1"},"\u2022\xA0\xA0Auto-refresh every 10 minutes",-1),fe=k({setup(p){const n=$([]),c=$(!1),d=L(()=>n.value.filter(e=>e.availability==="issues")),s=L(()=>n.value.filter(e=>e.availability==="error")),a=async()=>{c.value=!0;const e=await fetch("https://webapps.manchester.ac.uk/shared/areas/serviceavailability/live/ajax/list_serviceavailability.php?xsi=14&advanced=1").then(i=>i.json()).catch(()=>Promise.resolve([]));c.value=!1,n.value=(await e).result};return V(async()=>{a(),setInterval(a,6e5);const e=new URLSearchParams(window.location.search);(e.get("dark")||"false")==="true"&&document.documentElement.classList.add("dark");const i=e.get("origin")||"";window.addEventListener("message",m=>{if(m.origin!==i)return;const f=JSON.parse(m.data);for(const x of f)x.type==="dark"&&(x.payload?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"))},!1)}),(e,i)=>{const m=R,f=W,x=ie,N=de,S=M;return r(),o(h,null,[ue,l(d).length===0&&l(s).length===0&&n.value.length>0&&!c.value?(r(),o("section",pe,[v(m,{class:"mr-2 text-sm"}),_e])):u("",!0),l(s).length>0?(r(),b(f,{key:1,type:"error",list:l(s)},null,8,["list"])):u("",!0),l(d).length>0?(r(),b(f,{key:2,type:"issue",list:l(d)},null,8,["list"])):u("",!0),n.value.length>0?(r(),b(x,{key:3,list:n.value},null,8,["list"])):u("",!0),n.value.length===0?(r(),b(N,{key:4,list:n.value,loading:c.value},null,8,["list","loading"])):u("",!0),t("footer",me,[t("a",ge,[he,v(S,{class:"text-xs ml-1"})]),ye])],64)}}});j(fe).mount("#app");export{xe as __vite_legacy_guard};
