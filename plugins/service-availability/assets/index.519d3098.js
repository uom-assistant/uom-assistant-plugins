import{o as r,c as o,a as t,d as $,t as M,b as m,u as a,F as h,r as S,n as g,e as p,f as w,g as f,h as L,i as A,j,k,l as B}from"./vendor.4eeeb206.js";function ve(){import("data:text/javascript,")}const C=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))d(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&d(l)}).observe(document,{childList:!0,subtree:!0});function i(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerpolicy&&(n.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?n.credentials="include":s.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function d(s){if(s.ep)return;s.ep=!0;const n=i(s);fetch(s.href,n)}};C();const E={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},P=t("path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10s10-4.5 10-10S17.5 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8s8 3.59 8 8s-3.59 8-8 8m4.59-12.42L10 14.17l-2.59-2.58L6 13l4 4l8-8l-1.41-1.42z",fill:"currentColor"},null,-1),R=[P];function z(_,e){return r(),o("svg",E,R)}var D={name:"mdi-check-circle-outline",render:z};const F={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},H=t("path",{d:"M14 3v2h3.59l-9.83 9.83l1.41 1.41L19 6.41V10h2V3m-2 16H5V5h7V3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7h-2v7z",fill:"currentColor"},null,-1),Y=[H];function I(_,e){return r(),o("svg",F,Y)}var O={name:"mdi-open-in-new",render:I};const T={class:"text-lg pb-1"},U={class:"pt-1"},q={class:"flex items-center justify-between"},J=["title"],K={key:0,class:"text-sm text-gray-500 dark:text-warm-gray-400"},G={class:"flex items-center justify-between mt-1"},Q={key:0,class:"text-xs text-gray-500 dark:text-warm-gray-400"},W=["href"],X=f("Find out more "),Z=$({props:{type:null,list:null},setup(_){const e=_,{list:i,type:d}=M(e);return(s,n)=>{const l=O;return r(),o("section",{class:g(["p-3 rounded-lg m-3 mt-0 border-1px dark:border-opacity-30 dark:bg-opacity-15",a(d)==="issue"?"bg-yellow-50 border-orange-200 dark:bg-yellow-200 dark:border-orange-300":"bg-red-50 border-red-200 dark:bg-red-200 dark:border-red-300"])},[t("h2",T,"Ongoing "+m(a(d)==="issue"?"issues":"errors"),1),t("ul",null,[(r(!0),o(h,null,S(a(i),(c,u)=>(r(),o(h,{key:`all-${c.id}`},[t("li",U,[t("div",q,[t("h3",{class:"text-gray-700 dark:text-warm-gray-300 mb-0.5",title:c.description},m(c.name),9,J),t("span",{class:g(["w-12px h-12px rounded-full mr-1 flex-center",a(d)==="issue"?"bg-yellow-500":"bg-red-500"])},[t("span",{class:g(["w-12px h-12px block rounded-full animate-ping animation-slow bg-opacity-40",a(d)==="issue"?"bg-yellow-500":"bg-red-500"])},null,2)],2)]),c.notes?(r(),o("p",K,m(c.notes),1)):p("",!0),t("div",G,[c.timestamp?(r(),o("span",Q,"Last updated: "+m(c.timestamp),1)):p("",!0),c.url?(r(),o("a",{key:1,class:"text-xs text-primary-dark inline-flex items-center dark:text-primary-light hover:underline",target:"_blank",href:c.url},[X,w(l,{class:"ml-0.5"})],8,W)):p("",!0)])]),u!==a(i).length-1?(r(),o("hr",{key:0,class:g(["pb-1 mt-2.5 dark:border-opacity-20",a(d)==="issue"?"border-orange-100 dark:border-orange-200":"border-red-100 dark:border-red-200"])},null,2)):p("",!0)],64))),128))])],2)}}}),ee={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},te=t("path",{d:"M11 9h2V7h-2m1 13c-4.41 0-8-3.59-8-8s3.59-8 8-8s8 3.59 8 8s-3.59 8-8 8m0-18A10 10 0 0 0 2 12a10 10 0 0 0 10 10a10 10 0 0 0 10-10A10 10 0 0 0 12 2m-1 15h2v-6h-2v6z",fill:"currentColor"},null,-1),se=[te];function re(_,e){return r(),o("svg",ee,se)}var ne={name:"mdi-information-outline",render:re};const ae={class:"p-3 bg-true-gray-100 rounded-lg m-3 mt-0 dark:bg-true-gray-700"},oe=t("h2",{class:"text-lg pb-1"},"All Services",-1),le=["title"],ie=["href"],ce={key:0,class:"pb-1 mt-2 dark:border-true-gray-600"},de=$({props:{list:null},setup(_){const e=_,{list:i}=M(e);return(d,s)=>{const n=ne;return r(),o("section",ae,[oe,t("ul",null,[(r(!0),o(h,null,S(a(i),(l,c)=>(r(),o(h,{key:`all-${l.id}`},[t("li",{class:g(["pt-1 flex items-center justify-between",{"-mb-0.5":c===a(i).length-1}])},[t("h3",{class:"text-gray-700 dark:text-gray-300 flex items-center justify-between",title:l.description},[f(m(l.name),1),l.url?(r(),o("a",{key:0,target:"_blank",class:"inline-flex items-center",href:l.url},[w(n,{class:"text-sm ml-1.5 text-gray-500 dark:text-gray-400"})],8,ie)):p("",!0)],8,le),t("span",{class:g(["w-12px h-12px rounded-full mr-1 flex-center",l.availability==="ok"?"bg-green-500":l.availability==="issues"?"bg-yellow-500":"bg-red-500"])},[t("span",{class:g(["w-12px h-12px block rounded-full animate-ping animation-slow bg-opacity-40",l.availability==="ok"?"bg-green-500":l.availability==="issues"?"bg-yellow-500":"bg-red-500"])},null,2)],2)],2),c!==a(i).length-1?(r(),o("hr",ce)):p("",!0)],64))),128))])])}}}),ue={class:"h-200px flex-center text-gray-300"},pe=$({props:{list:null,loading:{type:Boolean}},setup(_){const e=_,{list:i,loading:d}=M(e);return(s,n)=>(r(),o("div",ue,m(a(i).length===0&&a(d)?"Loading\u2026":"No data"),1))}});const _e=t("h1",{class:"font-display text-2xl px-3 py-5 font-bold flex items-center justify-start"},[t("span",{class:"w-15px h-15px bg-primary-dark rounded-full mr-3 ml-2 flex-center dark:bg-primary-light"},[t("span",{class:"w-15px h-15px bg-primary-dark block rounded-full animate-ping animation-slow bg-opacity-40 dark:bg-primary-light"})]),f(" Service availability ")],-1),me={key:0,class:"px-3 py-2 bg-green-50 rounded-lg m-3 mt-0 text-green-500 border-green-200 border-1px dark:bg-green-200 dark:border-green-300 dark:border-opacity-30 dark:bg-opacity-15 flex items-center"},ge=f(" All services are in operation. "),he={class:"pt-1 pb-4 text-sm"},fe={target:"_blank",class:"inline-flex items-center mx-3 text-primary-dark dark:text-primary-light",href:"https://www.itservices.manchester.ac.uk/help/serviceavailability/"},ye=f("Source"),xe={class:"text-gray-400 dark:text-gray-500 inline-block mx-3 mt-0.7"},be=$({setup(_){const e=L([]),i=L(!1),d=L(new Date().valueOf()),s=A(()=>e.value!==void 0?e.value.filter(u=>u.availability==="issues"):[]),n=A(()=>e.value!==void 0?e.value.filter(u=>u.availability==="error"):[]),l=A(()=>{const u=new Date(d.value);return`${`${u.getHours()}`.padStart(2,"0")}:${`${u.getMinutes()}`.padStart(2,"0")}`}),c=async()=>{i.value=!0;const u=await fetch("https://webapps.manchester.ac.uk/shared/areas/serviceavailability/live/ajax/list_serviceavailability.php?xsi=14&advanced=1").then(y=>y.json()).catch(()=>Promise.resolve([]));i.value=!1,e.value=(await u).result,d.value=new Date().valueOf()};return j(async()=>{c(),setInterval(c,6e5);const u=new URLSearchParams(window.location.search);(u.get("dark")||"false")==="true"&&document.documentElement.classList.add("dark");const y=u.get("origin")||"";window.addEventListener("message",x=>{if(x.origin!==y)return;const b=JSON.parse(x.data);for(const v of b)v.type==="dark"&&(v.payload?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"))},!1)}),(u,y)=>{const x=D,b=Z,v=de,N=pe,V=O;return r(),o(h,null,[_e,a(s).length===0&&a(n).length===0&&e.value.length>0&&!i.value?(r(),o("section",me,[w(x,{class:"mr-2 text-sm"}),ge])):p("",!0),a(n).length>0?(r(),k(b,{key:1,type:"error",list:a(n)},null,8,["list"])):p("",!0),a(s).length>0?(r(),k(b,{key:2,type:"issue",list:a(s)},null,8,["list"])):p("",!0),e.value.length>0?(r(),k(v,{key:3,list:e.value},null,8,["list"])):p("",!0),e.value.length===0?(r(),k(N,{key:4,list:e.value,loading:i.value},null,8,["list","loading"])):p("",!0),t("footer",he,[t("a",fe,[ye,w(V,{class:"text-xs ml-1"})]),t("div",xe,"Updated "+m(a(l))+"\xA0\u2022\xA0Auto-refresh every 10 minutes",1)])],64)}}});B(be).mount("#app");export{ve as __vite_legacy_guard};
